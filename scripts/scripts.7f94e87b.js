"use strict";var app=angular.module("flashcardsApp",["ngAnimate","ngRoute","ngSanitize","ngTouch","LocalStorageModule","ui.bootstrap"]);app.config(["localStorageServiceProvider",function(a){a.setPrefix(app.name)}]),app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/cards.html",controller:"CardsCtrl"}).otherwise({redirectTo:"/"})}]),app.controller("CardsCtrl",["$scope","$modal","localStorageService",function(a,b,c){a.cards=angular.fromJson(c.get("cards"))||[],a.$watch("cards",function(){c.add("cards",angular.toJson(a.cards))},!0),a.card=[{image:"",text:""},{image:"",text:""}],a.openModal=function(c){var d=b.open({templateUrl:"views/modal-content.html",controller:"ModalInstanceCtrl",resolve:{index:function(){return c},card:function(){return void 0!==c&&(a.card=a.cards[c]),a.card}}});d.result.then(function(b){a.saveCard(b.index),b.open&&a.openModal()})},a.usePredefined=function(){var b=window.location.pathname.split("/");b[b.length-1].match(/\.html$/)&&b.pop();var c=window.location.protocol+"//"+window.location.host+b.join("/");a.cards=[[{text:"Feles",image:c+"/images/latin.jpg"},{text:"Cat",image:c+"/images/cat.jpg"}],[{text:"Canis",image:c+"/images/latin.jpg"},{text:"Dog",image:c+"/images/dog.png"}],[{text:"Catulus suis",image:c+"/images/latin.jpg"},{text:"Piglet",image:c+"/images/piglet.jpg"}]],a.cards[0].visible=!0},a.saveCard=function(b){a.cards.forEach(function(a){a.visible=!1}),a.card.visible=!0,void 0!==b?a.cards[b]=a.card:a.cards.push(a.card),a.card=[{image:"",text:""},{image:"",text:""}]},a.removeCard=function(b){a.cards.splice(b,1)}}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance","card","index",function(a,b,c,d){a.card=c,a.ok=function(a){b.close({open:a,index:d})},a.cancel=function(){b.dismiss("cancel")}}]),app.directive("deck",function(){return{restrict:"E",replace:!0,scope:{cards:"="},link:function(a){a.currentIndex=0,a.currentSide=0,a.next=function(){a.currentIndex<a.cards.length-1?a.currentIndex++:a.currentIndex=0},a.prev=function(){a.currentIndex>0?a.currentIndex--:a.currentIndex=a.cards.length-1},a.flip=function(){a.currentSide=0===a.currentSide?1:0},a.edit=function(b){a.$parent.openModal(b)},a.delete=function(b){a.$parent.removeCard(b),a.cards.length>1?a.next():1===a.cards.length&&(a.cards[0].visible=!0)},a.$watch("currentIndex",function(){a.cards.forEach(function(a){a.visible=!1}),angular.isDefined(a.cards[a.currentIndex])&&(a.cards[a.currentIndex].visible=!0),a.currentSide=0})},templateUrl:"views/deck.html"}}),app.directive("bgImg",function(){return{restrict:"A",link:function(a,b,c){var d=c.bgImg;b.css({"background-image":"url("+d+")","background-size":"cover"})}}});